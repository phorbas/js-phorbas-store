import * as test_bdd from 'node:test'

import {validate_backend} from '@phorbas/store/esm/validate_backend.js'
import {bkc_with_keyv} from '@phorbas/store/esm/adapter/keyv.js'

import {Keyv} from 'keyv'
import {KeyvFile} from 'keyv-file'

test_bdd.describe @ 'keyv', @::>
  validate_backend @ test_bdd, 'keyv with Map()', ()=>
    bkc_with_keyv @
      new Keyv @:
        store: new Map()

  validate_backend @ test_bdd, 'keyv with KeyvFile()', ()=>
    bkc_with_keyv @
      new Keyv @:
        store: new KeyvFile @:
          filename: '/var/phorbas/keyv_file/db.json'

